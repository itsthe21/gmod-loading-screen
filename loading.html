<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>جارٍ التحميل — سيرفر ٢١</title>
<style>
  :root{
    --accent1: #5ee7df;
    --accent2: #6a82fb;
    --bg: #07080a;
    --glass: rgba(255,255,255,0.06);
  }
  html,body{
    height:100%;
    margin:0;
    font-family: "Dubai", Tahoma, Arial, sans-serif;
    direction: rtl;
  }
  body{
    background: #000;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .container{
    position: relative;
    width: 100%;
    height: 100vh;
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .slider{
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
    z-index: 0;
  }
  .slide{
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
    background-size: cover;
    background-position: center;
    opacity: 0;
    transition: opacity 1s ease;
    filter: brightness(0.6) saturate(1.05);
  }
  .slide.show{
    opacity: 1;
  }
  .overlay{
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
    background: linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.5));
    z-index: 1;
  }
  .front{
    position: relative;
    z-index: 2;
    text-align: center;
    width: min(1100px, 92%);
    padding: 30px;
    box-sizing: border-box;
  }
  .brand{
    font-size: 34px;
    font-weight: 700;
    margin-bottom: 6px;
    letter-spacing: 0.6px;
  }
  .card{
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    background: var(--glass);
    padding: 16px;
    border-radius: 14px;
    backdrop-filter: blur(6px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.6);
    max-width: 600px;
    margin: 0 auto;
  }
  .progress-wrap{
    width: 100%;
  }
  .progress{
    height: 12px;
    background: rgba(255,255,255,0.08);
    border-radius: 12px;
    overflow: hidden;
  }
  .bar{
    height: 100%;
    width: 0%;
    border-radius: 12px;
    background: linear-gradient(90deg, var(--accent1), var(--accent2));
    transition: width 0.35s ease;
  }
  .map{
    font-size: 14px;
    opacity: 0.95;
    margin-top: 8px;
    text-align: center;
  }
  .controls{
    display: flex;
    gap: 12px;
    align-items: center;
  }
  .btn{
    background: transparent;
    border: 1px solid rgba(255,255,255,0.12);
    padding: 8px 12px;
    border-radius: 10px;
    color: #fff;
    cursor: pointer;
  }
  .volume-controls{
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .volume-slider{
    width: 80px;
  }
  .credit{
    position: fixed;
    left: 18px;
    bottom: 14px;
    z-index: 3;
    opacity: 0.8;
    font-size: 13px;
  }
  @media (max-width:620px){
    .brand{
      font-size: 22px;
    }
    .progress-wrap{
      max-width: 80vw;
    }
    .volume-slider{
      width: 60px;
    }
  }
</style>
</head>
<body>

<div class="container">
  <div class="slider" id="slider">
    <div class="slide show" style="background-image:url('jeddah1.jpg')"></div>
    <div class="slide" style="background-image:url('jeddah2.jpg')"></div>
    <div class="slide" style="background-image:url('jeddah3.jpg')"></div>
    <div class="slide" style="background-image:url('jeddah4.jpg')"></div>
    <div class="slide" style="background-image:url('jeddah5.jpg')"></div>
	<div class="slide" style="background-image:url('jeddah6.jpg')"></div>
	<div class="slide" style="background-image:url('jeddah7.jpg')"></div>
	
  </div>

  <div class="overlay"></div>

  <div class="front" role="main" aria-live="polite">
    <div class="brand">سيرفر ٢١ "ورا مصنع الكراسي"</div>
    
    <div class="card">
      <div class="progress-wrap">
        <div class="progress"><div class="bar" id="bar"></div></div>
        <div class="map" id="mapText">جارٍ تحميل الخريطة...</div>
      </div>

      <div class="controls">
        <div class="volume-controls">
          <button class="btn" id="muteToggle" aria-label="كتم أو تشغيل الصوت">كتم الصوت</button>
          <input type="range" min="0" max="1" step="0.01" value="0.2" class="volume-slider" id="volumeSlider" aria-label="مستوى الصوت">
        </div>
      </div>
    </div>
  </div>

  <div class="credit">٢١ للخـــدمات اللوجستيّة</div>
</div>

<audio id="bgAudio" loop preload="auto"></audio>

<script>
  // سلايد الصور كل 21 ثانية
  const slides = document.querySelectorAll('.slide');
  let idx = 0;
  setInterval(() => {
    slides[idx].classList.remove('show');
    idx = (idx + 1) % slides.length;
    slides[idx].classList.add('show');
  }, 21000);

  // شريط التحميل واسم الخريطة
  const bar = document.getElementById('bar');
  const mapText = document.getElementById('mapText');
  const params = new URLSearchParams(window.location.search);
  const mapParam = params.get('Map') || params.get('map') || 'غير معروف';
  mapText.textContent = 'الخريطة: ' + mapParam;

  let pct = 0;
  const step = () => {
    pct = Math.min(100, pct + Math.random() * 10 + 4);
    bar.style.width = pct + '%';
    if (pct < 100) setTimeout(step, 550 + Math.random() * 300);
  };
  window.addEventListener('load', () => { setTimeout(step, 300); });

  // صوت الخلفية وقائمة التشغيل العشوائية
  const audio = document.getElementById('bgAudio');
  const muteToggle = document.getElementById('muteToggle');
  const volumeSlider = document.getElementById('volumeSlider');

  const playlist = [
    'audio.mp3',
    'audio1.mp3',
    'audio2.mp3',
    'audio3.mp3',
    'audio4.mp3',
    'audio5.mp3',
    'audio6.mp3',
    'audio7.mp3',
    'audio8.mp3',
    'audio9.mp3',
    'audio10.mp3'
  ];

  function getRandomTrackIndex() {
    return Math.floor(Math.random() * playlist.length);
  }

  let currentTrack = getRandomTrackIndex();

  function playTrack(index) {
    audio.src = playlist[index];
    audio.volume = volumeSlider.value || 0.2;
    audio.muted = false;
    audio.play().catch(e => console.log("منع التشغيل التلقائي:", e));
  }

  playTrack(currentTrack);

  audio.addEventListener('ended', () => {
    currentTrack = getRandomTrackIndex();
    playTrack(currentTrack);
  });

  muteToggle.addEventListener('click', () => {
    audio.muted = !audio.muted;
    muteToggle.textContent = audio.muted ? 'تشغيل الصوت' : 'كتم الصوت';
    if (!audio.muted) audio.play();
  });

  volumeSlider.addEventListener('input', (e) => {
    audio.volume = e.target.value;
    if (audio.muted) {
      audio.muted = false;
      muteToggle.textContent = 'كتم الصوت';
    }
    audio.play();
  });
</script>

</body>
</html>
